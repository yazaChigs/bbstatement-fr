<!-- <div class="container" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="10px" fxLayoutGap.xs="0">
    <div fxFlex="98%">
      <mat-toolbar class="border border-radius" style="border-radius: 5px ; ">
        <span>Dashboard</span>
      </mat-toolbar>
    </div>
</div> -->

<form [formGroup]="dashForm">
<div class="container" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="10px" fxLayoutGap.xs="0">
  <div fxFlex="20%">
      <mat-form-field appearance="outline" class="full-width top-filters">
          <input matInput [matDatepicker]="picker1" placeholder="Angular forms" formControlName="date" (dateChange)="getDate(dashForm.value)">
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
  </div>
  <div fxFlex="65%">
<div class="grid-container">
  <mat-grid-list cols="5" rowHeight="80px" gutterSize="3" class="branch-grid ">
      <!-- <div formArrayName="branchesForm"> -->
          <mat-grid-tile  *ngFor="let branch of allBranches | filterBy: formFilter index as i;" [colspan]="1" [rowspan]="1">
      <mat-card class="ob-card border_accent">
        <mat-card-content >
                <mat-checkbox [checked]="branch.selected" (change)="toggleForm(branch,i)">{{ branch.branchName }}</mat-checkbox>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>
  </div>
</div>
<div fxFlex="15%">
   <button type="button" mat-raised-button color="accent" class="top-filters-btn" (click)="getBranchInfo(selectedBranches)">
     <mat-icon>sync</mat-icon>Search</button>
</div>
  </div>
</form>

<div class="container" fxLayout fxLayout.xs="column" fxLayoutAlign="right" fxLayoutGap="12px" fxLayoutGap.xs="0">
  <div fxFlex="12%">
    <mat-card class="info-card ">
      <p>BSMS<strong></strong></p>
    </mat-card>
  </div>
  <div fxFlex="12%">
    <mat-card  [style.background-color]="demandVsSupplyBgColor()" class="info-card">
      DEMAND VS SUPPLY<h2>{{((branchesInfo.supplies / branchesInfo?.orders)*100).toFixed(2)}}%</h2>
    </mat-card>
  </div>
  <div fxFlex="12%">
    <mat-card class="info-card">
      <p>AVAILABLE STOCK</p><h2>{{branchesInfo.stockAvailable}}</h2>
    </mat-card>
  </div>
  <div fxFlex="12%">
    <mat-card class="info-card">
      <p>SUPPLIES:</p><strong>{{branchesInfo?.supplies}}</strong>
      <p>ORDERS:</p><strong>{{branchesInfo?.orders}}</strong>
    </mat-card>
  </div>
  <div fxFlex="12%">
    <mat-card [style.background-color]="collectionsBgColor()" class="info-card">
      <!-- <p>COLLECTIONS</p><h2>{{ ((branchesInfo?.collections/150)*100).toFixed(2)}}%</h2> -->
      <p>COLLECTIONS</p><h2>{{ collections}}%</h2>
    </mat-card>
  </div>
  <div fxFlex="12%">
    <mat-card class="info-card">
      <p>QUARANTINE STOCK</p><h2>{{branchesInfo.quarantineStock}}</h2>
    </mat-card>
  </div>
  <div fxFlex="12%">
    <mat-card class="info-card">
      <p>OPENING:<strong>{{branchesInfo?.opening}}</strong></p>
      <p>RECEIPTS:<strong>{{branchesInfo?.receipts}}</strong></p>
      <p>ISSUES:<strong>{{branchesInfo?.issues}}</strong></p>
      <p>DISCARDS:<strong>{{branchesInfo?.discards}}</strong></p>
    </mat-card>
  </div>
  </div>

  <mat-divider></mat-divider>

  <form [formGroup]="bloodStockManagementAnalysisForm">
  <div class="container" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="12px" fxLayoutGap.xs="0">
    <div fxFlex="80%">
  <mat-grid-list cols="8" rowHeight="25px" style="background: rgb(248, 236, 236);">
    <mat-grid-tile class="border_black" [colspan]=8> Blood Stocks Management Analysis</mat-grid-tile>

    <mat-grid-tile [rowspan]=2 class="border_black">Blood Group</mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black">Stocked Units</mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black">Branch Daily Requirements</mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black">Days Supply</mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black"> Stock Levels Color Code</mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black">No. of Weeks Supply</mat-grid-tile>
    <mat-grid-tile [colspan]=2 [rowspan]=2 class="border_black">Responsive Action</mat-grid-tile>

    <mat-grid-tile class="border_black">O+</mat-grid-tile>
    <mat-grid-tile class="border_black">
        <mat-form-field class="full-width">
            <input matInput placeholder="" formControlName="stockedUnitsOplus">
          </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile class="border_black">
      <mat-form-field class="full-width">
        <input matInput placeholder="" formControlName="requirementsOplus">
      </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile class="border_black">
        <mat-form-field class="full-width">
            <input matInput placeholder="" formControlName="daysSupplyOplus">
          </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile [style.background-color]="stockLevelColorCodeOplus()" class="border_black"></mat-grid-tile>

    <mat-grid-tile class="border_black">
        <mat-form-field class="full-width">
            <input matInput placeholder="" formControlName="weeksSupplyOplus">
          </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile [colspan]=2 class="border_black"><p>{{responsiveActionOplus()}}</p></mat-grid-tile>

    <mat-grid-tile class="border_black">O-</mat-grid-tile>
    <mat-grid-tile class="border_black">
        <mat-form-field class="full-width">
            <input matInput placeholder="" formControlName="stockedUnitsOminus">
          </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile class="border_black">
      <mat-form-field class="full-width">
        <input matInput placeholder="" formControlName="requirementsOminus">
      </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile class="border_black">
        <mat-form-field class="full-width">
            <input matInput placeholder="" formControlName="daysSupplyOminus">
          </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile [style.background-color]="stockLevelColorCodeOminus()" class="border_black"></mat-grid-tile>
    <mat-grid-tile class="border_black">
        <mat-form-field class="full-width">
            <input matInput placeholder="" formControlName="weeksSupplyOminus">
          </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile [colspan]=2 class="border_black"><p>{{responsiveActionOminus()}}</p></mat-grid-tile>

    <mat-grid-tile class="border_black">A+</mat-grid-tile>
    <mat-grid-tile class="border_black">
        <mat-form-field class="full-width">
            <input matInput placeholder="" formControlName="stockedUnitsAplus">
          </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile class="border_black">
      <mat-form-field class="full-width">
        <input matInput placeholder="" formControlName="requirementsAplus">
      </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile class="border_black">
        <mat-form-field class="full-width">
            <input matInput placeholder="" formControlName="daysSupplyAplus">
          </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile [style.background-color]="stockLevelColorCodeAplus()" class="border_black"></mat-grid-tile>
    <mat-grid-tile class="border_black">
        <mat-form-field class="full-width">
            <input matInput placeholder="" formControlName="weeksSupplyAplus">
          </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile [colspan]=2 class="border_black"><p>{{responsiveActionAplus()}}</p></mat-grid-tile>

    <mat-grid-tile class="border_black">B+</mat-grid-tile>
    <mat-grid-tile class="border_black">
      <mat-form-field class="full-width">
        <input matInput placeholder="" formControlName="stockedUnitsBplus">
      </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile class="border_black">
      <mat-form-field class="full-width">
      <input matInput placeholder="" formControlName="requirementsBplus">
    </mat-form-field>
  </mat-grid-tile>
    <mat-grid-tile class="border_black"><mat-form-field class="full-width">
        <input matInput placeholder="" formControlName="daysSupplyBplus">
      </mat-form-field></mat-grid-tile>
    <mat-grid-tile [style.background-color]="stockLevelColorCodeBplus()" class="border_black"></mat-grid-tile>
    <mat-grid-tile class="border_black">
        <mat-form-field class="full-width">
            <input matInput placeholder="" formControlName="weeksSupplyBplus">
          </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile [colspan]=2 class="border_black"><p>{{responsiveActionBplus()}}</p></mat-grid-tile>

    <mat-grid-tile [rowspan]=2 class="border_black">Available stock Total (Weighted)</mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black">
      <mat-form-field class="full-width">
        <input matInput placeholder="" formControlName="totalStockedUnitsAvailable">
      </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black">
      <mat-form-field class="full-width">
        <input matInput placeholder="" formControlName="bdrAvailableStockTotal">
      </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black">
        <mat-form-field class="full-width">
            <input matInput placeholder="" formControlName="daysSupplyAvailable">
          </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile [rowspan]=2 [style.background-color]="stockLevelColorCodeAvailable()" class="border_black"></mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black">
        <mat-form-field class="full-width">
            <input matInput placeholder="" formControlName="weeksSupplyAvailable">
          </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile [colspan]=2 [rowspan]=2 class="border_black">{{responsiveActionAvailable()}}</mat-grid-tile>

    <mat-grid-tile [rowspan]=2 class="border_black">Quarantine Stock Total (Weighted)</mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black">
      <mat-form-field class="full-width">
        <input matInput placeholder="" formControlName="totalStockedUnitsQuarantined">
      </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black"></mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black"></mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black"></mat-grid-tile>
    <mat-grid-tile [rowspan]=2 class="border_black"></mat-grid-tile>
    <mat-grid-tile [colspan]=2 [rowspan]=2 class="border_black"></mat-grid-tile>
  </mat-grid-list>
</div>
</div>
</form>

<div class="container" fxLayout fxLayout.xs="column" fxLayoutAlign="left" fxLayoutGap="12px" fxLayoutGap.xs="0">
  <div fxFlex="50%">
<app-BloodGroup-DaysSupply *ngIf="branchInfoAvailable" [branchData]="branchesInfo"></app-BloodGroup-DaysSupply>
</div></div>
<!-- {{dashForm.value | json}} -->
